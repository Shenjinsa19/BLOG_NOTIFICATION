{% extends "blogs/base.html" %}
{% block title %}{{ post.title }}{% endblock %}

{% block content %}
<article>
  <h2>{{ post.title }}</h2>
  <p>
    <em>
      By {{ post.author.username }}
      {% if user.is_authenticated and user != post.author %}
        <form method="post" action="{% url 'follow_toggle' post.author.id %}" style="display:inline;">
          {% csrf_token %}
          {% if post.author.id in followed_authors %}
            <button type="submit" style="background:none; border:none; color:blue; cursor:pointer;">(Unfollow)</button>
          {% else %}
            <button type="submit" style="background:none; border:none; color:blue; cursor:pointer;">(Follow)</button>
          {% endif %}
        </form>
      {% endif %}
    </em> on {{ post.created_at|date:"M d, Y H:i" }}
  </p>

  <div style="white-space: pre-wrap;">{{ post.content }}</div>

  {% if user.is_authenticated and user == post.author %}
    <p>
      <a href="{% url 'post_edit' post.pk %}">Edit</a> |
      <a href="{% url 'post_delete' post.pk %}">Delete</a>
    </p>
  {% endif %}

  <p><a href="{% url 'post_list' %}">Back to Posts</a></p>
</article>
{% endblock %}
